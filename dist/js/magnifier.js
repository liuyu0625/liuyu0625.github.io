"use strict";var box=document.querySelector(".show_box_left"),small=box.children[0],mask=box.children[0].children[1],big=box.children[1],bigImg=box.children[1].children[0];function scroll(){return{left:document.documentElement.scrollLeft||document.body.scrollLeft,top:document.documentElement.scrollTop||document.body.scrollTop}}small.onmouseenter=function(){mask.style.display="block",big.style.display="block"},small.onmouseleave=function(){mask.style.display="none",big.style.display="none"},small.onmousemove=function(o){var s=o||event,t=mask.offsetWidth,e=mask.offsetHeight,i=box.offsetWidth,l=box.offsetHeight,n=s.clientX+scroll().left-box.offsetLeft,a=s.clientY+scroll().top-box.offsetTop;(n-=t/2)<0&&(n=0),i-t<n&&(n=i-t),(a-=e/2)<0&&(a=0),l-e<a&&(a=l-e),mask.style.left=n+"px",mask.style.top=a+"px";var c=-n/box.offsetWidth*bigImg.offsetWidth,r=-a/box.offsetHeight*bigImg.offsetHeight;bigImg.style.left=c+"px",bigImg.style.top=r+"px"},$(".moveleft_on").click(function(){$(".box_bottom ul").animate({left:"-280px"},"slow"),$(this).hide().siblings(".moveright_on").show()}),$(".moveright_on").click(function(){$(".box_bottom ul").animate({left:"0px"},"slow"),$(this).hide().siblings(".moveleft_on").show()}),$(".box_bottom ul li").mouseover(function(){$(this).addClass("on").siblings("li").removeClass("on");var o=$(this).index(),s=$(this).find("img").attr("src"),t=s.slice(0,-4)+"big.jpg",e=s.slice(0,-4)+"small.jpg";o<3?($(".small_box").find("img").attr("src",e).siblings(".mask").css({opacity:.4}),$(".big_box").find("img").attr("src",t),$(".big_box img").css({display:"block"}).parents(".big_box").css({border:"1px solid #000"})):($(".small_box").find("img").attr("src",e).siblings(".mask").css({opacity:0}),$(".big_box img").css({display:"none"}).parents(".big_box").css({border:"1px solid transparent"}))}),$("#more_clk").mouseover(function(){$(this).addClass("on")}),$("#more_clk").mouseleave(function(){$(this).removeClass("on")});var goodsId=location.href.split("=")[1];$.ajax({url:"http://localhost/project/php/data.php",dataType:"json",success:function(o){var t="";o.forEach(function(o,s){o.id==goodsId&&(t="\n                <h3>".concat(o.title,'</h3>\n                <em class="u_psys_pri">\n                     <span class="coupon_tips cou_bg_th">价格</span><i class="con_i">￥</i><b>').concat(o.price,'</b>\n                </em>\n                <span class="u_psys_sale">\n                    <i>售出</i>\n                    <b>').concat(o.sale,"</b>\n                    <i>评论</i>\n                    <b>599</b>\n                </span>")),$(".f_psys_pri").html(t)}),$("#buyNowPopBtn").click(function(){var e=JSON.parse(localStorage.getItem("car_data"))||[];o.forEach(function(o){if(goodsId==o.id){for(var s={goods:o,num:1},t=0;t<e.length;t++)if(e[t].goods.id==s.goods.id)return e[t].num=1,localStorage.setItem("car_data",JSON.stringify(e)),!1;e.push(s),localStorage.setItem("car_data",JSON.stringify(e))}})})}});